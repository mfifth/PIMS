<div class="ingredient-item mb-4 bg-white p-3 rounded-lg shadow-sm border" data-new-record="<%= f.object.new_record? %>">
  <div class="flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4">
    <div class="product-name sm:w-1/2 px-3 py-2 font-medium" data-recipe-items-target="productName">
      <%= f.object.product&.name || "Product not selected" %>
    </div>
    
    <div class="flex flex-row gap-3 sm:w-1/2">
      <%= f.number_field :quantity,
        step: (['units', 'fluid_oz'].include?(f.object.unit) ? 1 : 0.1),
        min: 1,
        class: "w-1/3 border rounded px-3 py-2 focus:ring-blue-500 focus:border-blue-500",
        data: { unit_type: f.object.unit } %>

      <%= f.select :unit,
        f.object.compatible_unit_options,
        {},
        class: "w-1/3 border rounded px-3 py-2 focus:ring-blue-500 focus:border-blue-500",
        data: { recipe_items_target: "unitInput" } %>

      <%= link_to "Remove", "#", class: "w-1/3 text-red-600 hover:text-red-800 text-sm flex items-center justify-center sm:justify-start", data: { action: "click->recipe-items#remove" } %>
    </div>

    <%= f.hidden_field :product_id %>
    <%= f.hidden_field :_destroy %>
  </div>
</div>