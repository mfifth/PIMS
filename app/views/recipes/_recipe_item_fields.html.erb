<div class="ingredient-item flex flex-col justify-between bg-white p-4 rounded-lg shadow-sm border h-full" data-new-record="<%= f.object.new_record? %>">

  <!-- Product Name -->
  <div class="font-medium text-gray-900 mb-4 px-2" data-recipe-items-target="productName">
    <%= f.object.product&.name || "Product not selected" %>
  </div>

  <!-- Quantity -->
  <div class="mb-4">
    <%= f.label :quantity, "Quantity", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.number_field :quantity, 
        step: (f.object.unit == 'units' ? 1 : 0.1),
        min: (f.object.unit == 'units' ? 1 : 0.1),
        class: "w-full border rounded px-3 py-2 focus:ring-blue-500 focus:border-blue-500",
        data: { unit_type: f.object.unit } %>
  </div>

  <!-- Unit -->
  <div class="mb-4">
    <%= f.label :unit, "Unit", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= f.select :unit,
        f.object.compatible_unit_options,
        {},
        class: "w-full border rounded px-3 py-2 focus:ring-blue-500 focus:border-blue-500",
        data: { recipe_items_target: "unitInput" } %>
  </div>

  <!-- Remove link at bottom -->
  <div class="text-right mt-auto pt-4 border-t border-gray-200">
    <%= link_to "Remove", "#", class: "text-red-600 hover:text-red-800 text-sm", data: { action: "click->recipe-items#remove" } %>
  </div>

  <!-- Hidden fields -->
  <%= f.hidden_field :product_id %>
  <%= f.hidden_field :_destroy %>
</div>
