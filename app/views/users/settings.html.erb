<div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl border border-gray-300">
  <h1 class="text-2xl font-semibold mb-6 text-gray-800"><%= t("account_settings.title") %></h1>

  <%= render 'subscription_display', account: Current.account %>

  <turbo-frame id="account_settings">
    <%= render "form" %>
  </turbo-frame>

  <br>
  
  <% if Current.user.admin? %>
    <% if square_connected? %>
      <div class="mt-6 mb-4 p-4 border border-green-300 bg-green-50 rounded-md">
        <p class="text-green-700 font-semibold flex items-center">
          ✅ <%= t("account_settings.square.connected") %>
        </p>

        <div class="mt-4 flex flex-wrap gap-4">
          <%= button_to t("account_settings.square.sync_data"), square_sync_data_path, method: :post,
            class: "bg-blue text-white px-4 py-2 rounded hover:bg-indigo-700",
            data: { disable_with: t("account_settings.square.syncing") } %>
        </div>
      </div>
    <% else %>
      <%= button_to t("account_settings.square.connect"), "/square/oauth/start", method: :get,
        class: "bg-blue text-white px-4 py-2 rounded hover:bg-indigo-700",
        data: { disable_with: t("account_settings.square.connecting", turbo: false) } %>
    <% end %>
  
    <br>

    <% if clover_connected? %>
      <div class="mt-6 mb-4 p-4 border border-green-300 bg-green-50 rounded-md">
        <p class="text-green-700 font-semibold flex items-center">
          ✅ <%= t("account_settings.clover.connected") %>
        </p>

        <div class="mt-4 flex flex-wrap gap-4">
          <%= button_to t("account_settings.clover.sync_data"), clover_sync_data_path, method: :post,
            class: "bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",
            data: { disable_with: t("account_settings.clover.syncing") } %>
        </div>
      </div>
    <% else %>
      <%= button_to t("account_settings.clover.connect"), "/clover/oauth/start", method: :get,
        class: "bg-blue text-white px-4 py-2 rounded hover:bg-green-700",
        data: { disable_with: t("account_settings.clover.connecting", turbo: false) } %>
    <% end %>
  <% end %>

  <% if Current.user.admin? %>
    <%= render 'invitation_partial', invitations: @invitations %>

    <div class="mt-8 text-center flex justify-center">
      <%= link_to t("account_settings.delete_account"), '/delete_account',
          data: { turbo_confirm: t("account_settings.confirm_delete"), turbo_method: :delete },
          class: "text-red-600 hover:text-red-800 text-white underline delete-acc-btn" %>
    </div>
  <% end %>
</div>
